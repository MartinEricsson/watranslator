// Generated by ğŸ¤–
import { readTestData } from '../test-utils.mjs';
import assert from 'assert';

async function testRefIsNull(debug = false) {
  try {
    const { wasmBuffer } = await readTestData('reference-opcodes/ref-is-null.wat', debug);
    const { instance } = await WebAssembly.instantiate(wasmBuffer, {});

    // Test null reference
    assert.strictEqual(instance.exports.test_null(), 1, 'null reference should be null');
    console.log('âœ… Null reference test passed');

    // Test function reference
    assert.strictEqual(instance.exports.test_func_ref(), 0, 'function reference should not be null');
    console.log('âœ… Function reference test passed');

    return true;
  } catch (error) {
    console.error('âŒ ref.is_null test failed:', error);
    return false;
  }
}

export default testRefIsNull;
import { atEnd, getToken } from '../tape.mjs';

export function parseRefInstruction(instrToken, position) {
    if (atEnd()) return null;

    // Generated by ðŸ¤–
    if (instrToken === 'ref.func') {
        // Parse the function reference (name or index)
        const func = getToken();
        return { type: 'ref.func', func, position };
    }

    if (instrToken === 'ref.null') {
        // Generated by ðŸ¤–
        // Parse the reference type (func, extern)
        const refType = getToken();
        return { type: 'ref.null', refType, position };
    }

    return null;
}